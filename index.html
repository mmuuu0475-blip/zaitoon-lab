<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>Zaitoon Lab | Ù…Ø±ÙƒØ² Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        /* SECTION 1: CSS VARIABLES & DESIGN SYSTEM 
           Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙŠØ­Ø¯Ø¯ Ø§Ù„Ø«ÙˆØ§Ø¨Øª Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ© Ù„Ù„ØªØµÙ…ÙŠÙ… Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªØºÙŠØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        */
        :root {
            /* Ø§Ù„Ø¨Ù„ÙŠØªØ© Ø§Ù„Ù„ÙˆÙ†ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ù†Ø¸Ø§Ù… Ù…Ø®ØµØµ */
            --primary-color: #1e5c20;
            --primary-hover: #2d8a31;
            --primary-light: #e8f5e9;
            --secondary-color: #24292e;
            --accent-color: #0366d6;
            --danger-color: #d73a49;
            --warning-color: #ffd33d;
            --success-color: #28a745;
            
            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø®Ù„ÙÙŠØ§Øª ÙˆØ§Ù„Ø£Ø³Ø·Ø­ */
            --bg-color: #ffffff;
            --surface-color: #f6f8fa;
            --border-color: #d1d5db;
            --text-main: #24292e;
            --text-muted: #586069;
            --text-white: #ffffff;
            
            /* Ø£Ø¨Ø¹Ø§Ø¯ ÙˆØ¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… */
            --container-max-width: 900px;
            --header-height: 200px;
            --border-radius-sm: 4px;
            --border-radius-md: 6px;
            --border-radius-lg: 8px;
            
            /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¸Ù„Ø§Ù„ ÙˆØ§Ù„Ø¹Ù…Ù‚ */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.05);
            --shadow-lg: 0 10px 20px rgba(0,0,0,0.1);
            
            /* Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª Ø§Ù„Ø­Ø±ÙƒÙŠØ© */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-main: 0.3s ease;
        }

        /* SECTION 2: GLOBAL RESET & BASE STYLES 
           Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ø¶Ù…Ø§Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª
        */
        *, *::before, *::after {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Cairo', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* ØªØ®ØµÙŠØµ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„ÙŠÙ†Ø§Ø³Ø¨ ÙØ®Ø§Ù…Ø© Ø§Ù„ÙƒÙˆØ¯ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }

        /* SECTION 3: LAYOUT STRUCTURE 
           Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ø¸Ù…ÙŠ Ù„Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        */
        .container {
            width: 95%;
            max-width: var(--container-max-width);
            margin: 40px auto;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            background: var(--bg-color);
            position: relative;
            transition: var(--transition-main);
        }

        /* HEADER DYNAMICS */
        header {
            background-color: var(--primary-color);
            background-image: linear-gradient(135deg, var(--primary-color) 0%, #2a7a2e 100%);
            color: var(--text-white);
            padding: 30px 20px;
            text-align: center;
            border-bottom: 4px solid var(--warning-color);
            position: relative;
        }

        header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 800;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            margin: 10px 0 0;
            opacity: 0.85;
            font-size: 15px;
            font-weight: 400;
        }

        /* SECTION 4: CONTROLS BAR (SEARCH & ADD) 
           ØªÙ†Ø³ÙŠÙ‚ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©
        */
        .controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 280px;
            position: relative;
        }

        #appSearch {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 1.5px solid var(--border-color);
            border-radius: var(--border-radius-md);
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            transition: all var(--transition-fast);
            background: var(--bg-color) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>') no-repeat 95% center;
        }

        #appSearch:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(3, 102, 214, 0.1);
            background-color: #fff;
        }

        .add-button {
            background-color: var(--primary-color);
            color: var(--text-white);
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-weight: 700;
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all var(--transition-main);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .add-button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .add-button:active {
            transform: translateY(0);
        }

        .plus-icon {
            font-size: 20px;
            line-height: 1;
        }
        /* SECTION 5: THE TABLE ARCHITECTURE 
           ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ­Ù‰ Ù…Ù† Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
        */
        .content { 
            padding: 0; /* ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø´Ùˆ Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ØªÙ…Ø¯Ø¯ */
        }

        .table-responsive-wrapper {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 0;
            font-size: 14px;
            table-layout: fixed; /* Ù„Ø¶Ù…Ø§Ù† Ø«Ø¨Ø§Øª Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        th {
            background-color: #f6f8fa;
            color: var(--text-muted);
            text-align: right;
            padding: 15px 20px;
            border-bottom: 2px solid var(--border-color);
            border-left: 1px solid #eee;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        th:last-child { border-left: none; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        td {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            border-left: 1px solid #f0f0f0;
            vertical-align: middle;
            transition: background var(--transition-fast);
            word-wrap: break-word;
        }

        td:last-child { border-left: none; }

        tr:last-child td { border-bottom: none; }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­ÙˆÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„ØµÙÙˆÙ */
        tbody tr:hover {
            background-color: #fcfcfc;
        }

        /* SECTION 6: APP INFO CELL (The Most Complex Part) 
           ØªÙ†Ø³ÙŠÙ‚ Ø®Ù„ÙŠØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙŠ ØªØ¬Ù…Ø¹ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„ÙˆØµÙ
        */
        .app-identity {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .app-icon-wrapper {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 1px solid #e1e4e8;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .app-icon-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .app-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .app-name {
            color: var(--text-main);
            font-weight: 700;
            font-size: 15px;
            display: block;
        }

        .app-platform {
            font-size: 12px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* SECTION 7: DOWNLOAD BUTTONS & BADGES 
           ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù„ÙˆÙ†Ø©
        */
        .download-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            background-color: #fff;
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
            border-radius: var(--border-radius-md);
            text-decoration: none;
            font-weight: 600;
            font-size: 13px;
            transition: all var(--transition-main);
        }

        .download-link:hover {
            background-color: var(--accent-color);
            color: #fff;
            box-shadow: 0 2px 4px rgba(3, 102, 214, 0.2);
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            background-color: var(--primary-light);
            color: var(--primary-color);
            border: 1px solid rgba(30, 92, 32, 0.1);
        }

        .badge-exe { background: #fff5f5; color: #c53030; border-color: #feb2b2; }
        .badge-zip { background: #fffaf0; color: #9b2c2c; border-color: #fbd38d; }

        /* SECTION 8: STATUS MESSAGES 
           Ø±Ø³Ø§Ø¦Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… (Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬)
        */
        .status-container {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(30, 92, 32, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ØªØ­Ø¯ÙŠØ¯ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„ØªØ¯Ø§Ø®Ù„ */
        th:nth-child(1) { width: 15%; } /* Ø§Ù„Ø±Ø§Ø¨Ø· */
        th:nth-child(2) { width: 12%; } /* Ø§Ù„Ù†ÙˆØ¹ */
        th:nth-child(3) { width: 58%; } /* Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù†Ø¸Ø§Ù… */
        th:nth-child(4) { width: 15%; } /* Ø§Ù„Ø­Ø¬Ù… */
        /* SECTION 9: ADDITIONAL UI ELEMENTS 
           ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: #fafafa;
            border-radius: var(--border-radius-lg);
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
        }

        .feature-item h4 {
            margin: 0;
            color: var(--primary-color);
            font-size: 16px;
        }

        .feature-item p {
            margin: 0;
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.4;
        }

        footer {
            margin-top: 50px;
            padding: 40px 20px;
            text-align: center;
            background: var(--surface-color);
            border-top: 1px solid var(--border-color);
        }

        footer p {
            margin: 5px 0;
            font-size: 13px;
            color: var(--text-muted);
        }

        footer a {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 600;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* SECTION 10: RESPONSIVE OVERRIDES 
           Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù„Ù‰ ÙƒØ§ÙØ© Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø´Ø§Ø´Ø§Øª
        */
        @media (max-width: 768px) {
            .controls-bar {
                flex-direction: column;
                align-items: stretch;
            }
            .search-box {
                width: 100%;
            }
            .add-button {
                width: 100%;
                justify-content: center;
            }
            th:nth-child(2), td:nth-child(2), 
            th:nth-child(4), td:nth-child(4) {
                display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ÙˆØ¹ ÙˆØ§Ù„Ø­Ø¬Ù… ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„ØªÙˆÙÙŠØ± Ù…Ø³Ø§Ø­Ø© */
            }
            th:nth-child(3) { width: 70%; }
            th:nth-child(1) { width: 30%; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-overlay"></div>
        <h1>Zaitoon Lab - Professional Download Center</h1>
        <p>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø© Ù„ØªÙˆØ²ÙŠØ¹ Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Madrani DZ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©</p>
        
        <div class="controls-bar">
            <div class="search-box">
                <input type="text" id="appSearch" onkeyup="searchTable()" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ Ø§Ù„ÙˆØ¸ÙŠÙØ©...">
            </div>
            
            <button class="add-button" id="mainAddBtn" onclick="initiateUploadWizard()">
                <span class="plus-icon">+</span> Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹
            </button>
            
            <input type="file" id="apkInput" style="display:none" accept=".apk">
            <input type="file" id="iconInput" style="display:none" accept=".png, .jpg, .jpeg, .ico">
        </div>
    </header>

    <div class="content">
        <div id="syncStatus" class="status-container" style="display:none;">
            <div class="loading-spinner"></div>
            <span id="statusText" style="font-weight: 600; color: var(--primary-color);">Ø¬Ø§Ø±ÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ GitHub...</span>
        </div>

        <div class="info-text" style="padding: 25px;">
            <div style="background: var(--primary-light); padding: 15px; border-radius: var(--border-radius-md); border-right: 4px solid var(--primary-color); margin-bottom: 25px;">
                <strong style="color: var(--primary-color);">ğŸ’¡ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹:</strong>
                <p style="margin: 5px 0 0; font-size: 13.5px;">Ù„Ø¶Ù…Ø§Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… WindowsØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ù„ÙØ§Øª ZIP ÙˆØ§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªØ´ØºÙŠÙ„. ÙÙŠ Ø­Ø§Ù„ Ø¸Ù‡ÙˆØ± ØªÙ†Ø¨ÙŠÙ‡ SmartScreenØŒ Ø§Ø®ØªØ± "More Info" Ø«Ù… "Run Anyway".</p>
            </div>

            <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆØ§Ù„Ù…Ø­Ø¯Ø«Ø© (v5.0.0):
            </h3>

            <div class="table-responsive-wrapper">
                <table id="deploymentTable">
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</th>
                            <th>Ø§Ù„Ù†ÙˆØ¹</th>
                            <th>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</th>
                            <th>Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù</th>
                        </tr>
                    </thead>
                    <tbody id="masterTableBody">
                        <tr class="official-row">
                            <td><a href="https://www.dropbox.com/scl/fi/hxq2egcsjp6b898ayrji3/fasterfast-madrani-palastine-gaza-QUDS.zip?dl=1" class="download-link">Download</a></td>
                            <td><span class="badge badge-zip">ZIP / EXE</span></td>
                            <td>
                                <div class="app-identity">
                                    <div class="app-icon-wrapper">
                                        <img src="https://www.google.com/search?q=https://cdn-icons-png.flaticon.com/512/732/732221.png" alt="WinIcon">
                                    </div>
                                    <div class="app-details">
                                        <span class="app-name">Faster Fast - Ultimate Edition</span>
                                        <span class="app-platform">Windows 10/11 (64-bit) ğŸ’»</span>
                                    </div>
                                </div>
                            </td>
                            <td>32.5 MB</td>
                        </tr>
                        <tr class="official-row">
                            <td><a href="https://www.dropbox.com/scl/fi/gt0cm41jhez0rmx6nwcti/Madrani-DZ-win32-x64-2.zip?dl=1" class="download-link">Download</a></td>
                            <td><span class="badge badge-exe">PORTABLE</span></td>
                            <td>
                                <div class="app-identity">
                                    <div class="app-icon-wrapper">
                                        <img src="https://cdn-icons-png.flaticon.com/512/226/226770.png" alt="WinIcon">
                                    </div>
                                    <div class="app-details">
                                        <span class="app-name">Madrani DZ - Classic Desktop</span>
                                        <span class="app-platform">Windows 7/8/10/11 (32/64-bit) ğŸ’»</span>
                                    </div>
                                </div>
                            </td>
                            <td>18.2 MB</td>
                        </tr>

                        <tr class="official-row">
                            <td><a href="https://github.com/mmuuu0475-blip/madrani-dz/raw/main/app-release%20(2).apk" class="download-link">Download</a></td>
                            <td><span class="badge">APK</span></td>
                            <td>
                                <div class="app-identity">
                                    <div class="app-icon-wrapper">
                                        <img src="https://cdn-icons-png.flaticon.com/512/226/226770.png" alt="AndroidIcon">
                                    </div>
                                    <div class="app-details">
                                        <span class="app-name">Madrani DZ Mobile App</span>
                                        <span class="app-platform">Android 5.0 and higher ğŸ“±</span>
                                    </div>
                                </div>
                            </td>
                            <td>1.0 MB</td>
                        </tr>
                        
                        <tr id="emptyState" style="display:none;">
                            <td colspan="4" style="text-align:center; padding: 40px; color: var(--text-muted);">
                                <p>ğŸ” Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="features-section" style="padding: 25px; border-top: 1px solid var(--border-color);">
            <h3 style="margin-bottom: 20px;">ğŸ›¡ï¸ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ© Ù„Ù„Ù…Ù†ØµØ©:</h3>
            <div class="features-grid">
                <div class="feature-item">
                    <h4>ğŸ“¦ Ø¶ØºØ· Ù…ØªÙÙˆÙ‚</h4>
                    <p>Ù†Ø³ØªØ®Ø¯Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª LZMA2 Ù„Ø¶Ù…Ø§Ù† Ø£Ù‚Ù„ Ø­Ø¬Ù… Ù…Ù…ÙƒÙ† Ù„Ù„Ù…Ù„ÙØ§Øª Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸš€ ØªØ´ØºÙŠÙ„ ÙÙˆØ±ÙŠ</h4>
                    <p>Ù†Ø³Ø® Ø§Ù„ÙˆÙŠÙ†Ø¯ÙˆØ² ØªØ¹Ù…Ù„ Ø¨Ù†Ø¸Ø§Ù… PortableØŒ Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø¹Ù‚Ø¯ØŒ ÙÙ‚Ø· ÙÙƒ Ø§Ù„Ø¶ØºØ· ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ”’ Ø£Ù…Ø§Ù† ÙƒØ§Ù…Ù„</h4>
                    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ØªÙ…Ø± Ø¹Ø¨Ø± ÙØ­Øµ SHA-256 Ù‚Ø¨Ù„ Ø±ÙØ¹Ù‡Ø§ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ù„Ø¶Ù…Ø§Ù† Ø®Ù„ÙˆÙ‡Ø§ Ù…Ù† Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¶Ø§Ø±Ø©.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“± ØªÙˆØ§ÙÙ‚ Ø´Ø§Ù…Ù„</h4>
                    <p>Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù…Ù†ØµØ§Øª Android Ùˆ Windows Ø¨Ù…Ø®ØªÙ„Ù Ø¥ØµØ¯Ø§Ø±Ø§ØªÙ‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø¹Ù…Ù„ ÙØ±ÙŠÙ‚ÙƒÙ….</p>
                </div>
            </div>
        </div>
    </div> </div> <footer>
    <div style="max-width: var(--container-max-width); margin: 0 auto; display: flex; flex-direction: column; gap: 10px;">
        <div style="font-weight: 700; color: var(--secondary-color); font-size: 16px;">Madrani DZ Engineering Team</div>
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù…Ø­ÙÙˆØ¸Ø© Â© 2026 - Zaitoon Lab Deployment Center</p>
        <p>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø®Ø¨Ø±Ø§Ø¡ Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ù„Ø¯Ø¹Ù… Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± Ø§Ù„ØªÙ‚Ù†ÙŠ.</p>
        
        <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
            <a href="https://github.com/mmuuu0475-blip/zaitoon-lab" target="_blank">Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ (GitHub)</a>
            <span style="color: #ccc;">|</span>
            <a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø£Ù…Ø§Ù†</a>
            <span style="color: #ccc;">|</span>
            <a href="#">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</a>
        </div>
    </div>
</footer>
<script>
/**
 * ==============================================================================
 * ZAITOON LAB - ADVANCED DEPLOYMENT ENGINE (CORE KERNEL)
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ§Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§ÙØ© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹.
 * ØªÙ… ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø­Ø±Ùƒ Ù„ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¸Ø§Ù… "Ø§Ù„ÙˆØ¹Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø±" (Asynchronous Promises) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… 
 * ØªØ¬Ù…ÙŠØ¯ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©.
 */

// 1. Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø£Ù…Ù†ÙŠ ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© (Global Configuration Object)
// ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† ÙƒØ§ÙØ© Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ÙˆØµÙˆÙ„ ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ù‡Ù†Ø§ Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©.
const SYSTEM_CORE = {
    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ (ÙŠØªÙ… ØªØ´ÙÙŠØ±Ù‡Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©)
    CREDENTIALS: {
        TOKEN: "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",
        OWNER: "mmuuu0475-blip",
        REPO: "zaitoon-lab",
        STORAGE_PATH: "uploads"
    },
    
    // Ù…Ø­Ø¯Ø¯Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©
    LIMITS: {
        MAX_APK_SIZE: 25 * 1024 * 1024, // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 25 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„Ù…Ù„ÙØ§Øª APK
        MAX_ICON_SIZE: 2 * 1024 * 1024,  // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 2 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
        ALLOWED_ICON_EXTENSIONS: ['png', 'jpg', 'jpeg', 'ico', 'svg', 'webp'],
        ALLOWED_APP_EXTENSIONS: ['apk']
    },
    
    // Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù„Ø­Ø¸ÙŠØ© (Reactive State)
    STATE: {
        isSyncing: false,
        totalAppsLoaded: 0,
        pendingUploads: 0,
        lastSyncTimestamp: null,
        currentView: 'all' // 'all' | 'android' | 'windows'
    },

    // Ù…Ø¹Ø§ÙŠÙŠØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    UI: {
        tableBodyId: "masterTableBody",
        statusTextId: "statusText",
        syncContainerId: "syncStatus",
        searchFieldId: "appSearch"
    }
};

/**
 * Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ Ø§Ù„Ø°Ø§ØªÙŠ (Self-Invoking Initializer)
 * ØªØ¹Ù…Ù„ ÙÙˆØ± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø¶Ù…Ø§Ù† Ø±Ø¨Ø· ÙƒØ§ÙØ© Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª.
 */
(function initializeSystem() {
    console.log("%c[ZAITOON KERNEL]: Initializing Security Protocols...", "color: #1e5c20; font-weight: bold;");
    
    // Ø±Ø¨Ø· Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event Listeners)
    document.addEventListener('DOMContentLoaded', () => {
        console.log("%c[ZAITOON KERNEL]: DOM Ready. Booting Fetch Engine...", "color: #0366d6;");
        startGlobalSynchronization();
    });

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù„Ù…ÙŠ
    window.addEventListener('unhandledrejection', (event) => {
        console.error('CRITICAL: Unhandled Data Rejection:', event.reason);
    });
})();

/**
 * Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£ÙˆÙ„: Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© (Global Sync Algorithm)
 * ØªÙ‚ÙˆÙ… Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub API ÙˆØ¬Ù„Ø¨ ÙƒØ§ÙØ© Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø©.
 */
async function startGlobalSynchronization() {
    if (SYSTEM_CORE.STATE.isSyncing) return;

    const syncUI = document.getElementById(SYSTEM_CORE.UI.syncContainerId);
    const statusLabel = document.getElementById(SYSTEM_CORE.UI.statusTextId);

    try {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©
        SYSTEM_CORE.STATE.isSyncing = true;
        syncUI.style.display = "block";
        statusLabel.innerText = "â³ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ...";

        // Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ (Fetch Protocol)
        const requestUrl = `https://api.github.com/repos/${SYSTEM_CORE.CREDENTIALS.OWNER}/${SYSTEM_CORE.CREDENTIALS.REPO}/contents/${SYSTEM_CORE.CREDENTIALS.STORAGE_PATH}`;
        
  // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Ù…Ø³
const response = await fetch(requestUrl, {
    method: "GET",
    headers: {
        "Authorization": `token ${SYSTEM_CORE.CREDENTIALS.TOKEN}`,
        "Accept": "application/vnd.github.v3+json"
        // ØªÙ… Ø­Ø°Ù Cache-Control Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© CORS
    }
});

        if (!response.ok) {
            throw new Error(`GitHub API Error: ${response.status} - ${response.statusText}`);
        }

        const repositoryData = await response.json();
        
        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¬Ù„ÙˆØ¨Ø© (Data Analysis)
        if (Array.isArray(repositoryData)) {
            statusLabel.innerText = `ğŸ” ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${repositoryData.length} Ù…Ù„Ù. Ø¬Ø§Ø±ÙŠ ØªØµÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª...`;
            await processRepositoryItems(repositoryData);
        } else {
            console.warn("SYSTEM: Repository path is empty or invalid.");
            statusLabel.innerText = "â„¹ï¸ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹.";
            setTimeout(() => syncUI.style.display = "none", 3000);
        }

    } catch (criticalError) {
        console.error("SYNC FAILURE:", criticalError);
        statusLabel.innerHTML = `<span style="color: var(--danger-color);">âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙØªØ§Ø­ Ø§Ù„ÙˆØµÙˆÙ„.</span>`;
    } finally {
        SYSTEM_CORE.STATE.isSyncing = false;
        SYSTEM_CORE.STATE.lastSyncTimestamp = new Date();
    }
}

/**
 * Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ù…Ø¹Ø§Ù„Ø¬ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (Item Processor)
 * Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ù…Ø¹Ù‚Ø¯Ø© Ù„Ø±Ø¨Ø· Ù…Ù„ÙØ§Øª Ø§Ù„Ù€ APK Ø¨Ø£ÙŠÙ‚ÙˆÙ†Ø§ØªÙ‡Ø§ Ø¹Ø¨Ø± Ø§Ù„Ù€ ID Ø§Ù„ÙØ±ÙŠØ¯.
 */
async function processRepositoryItems(items) {
    const tableBody = document.getElementById(SYSTEM_CORE.UI.tableBodyId);
    
    // ØªØµÙÙŠØ© Ù…Ù„ÙØ§Øª APK ÙˆØªØ®Ø²ÙŠÙ†Ù‡Ø§ ÙÙŠ Ù…ØµÙÙˆÙØ© Ù…Ø¤Ù‚ØªØ©
    const apkFiles = items.filter(file => file.name.toLowerCase().endsWith('.apk'));
    
    // Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¨Ø­Ø«
    const supportFiles = items.filter(file => !file.name.toLowerCase().endsWith('.apk'));

    for (const apk of apkFiles) {
        try {
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù (Ø§Ù„Ø§Ø³Ù…__Ø§Ù„Ù†ÙˆØ¹__Ø§Ù„Ø¥ØµØ¯Ø§Ø±__Ø§Ù„Ù…Ø¹Ø±Ù)
            // Ù†Ø³ØªØ®Ø¯Ù… RegExp Ù„Ø¶Ù…Ø§Ù† Ø¯Ù‚Ø© Ø§Ù„ØªÙÙƒÙŠÙƒ
            const fileNamePattern = /(.+?)__(.+?)__(.+?)__(.+)\.apk/i;
            const match = apk.name.match(fileNamePattern);

            let appName, appType, appVersion, uniqueID;

            if (match) {
                [, appName, appType, appVersion, uniqueID] = match;
            } else {
                // ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù„Ø§ ÙŠØªØ¨Ø¹ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                appName = apk.name.replace(".apk", "");
                appType = "Generic";
                appVersion = "1.0.0";
                uniqueID = "legacy";
            }

            // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© (Icon Mapping Algorithm)
            // Ù†Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù€ UniqueID Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
            const associatedIcon = supportFiles.find(file => file.name.includes(uniqueID));
            
            const iconUrl = associatedIcon 
                ? associatedIcon.download_url 
                : "https://cdn-icons-png.flaticon.com/512/226/226770.png"; // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ§Øª (UI Renderer)
            renderDynamicAppRow({
                title: decodeURIComponent(appName),
                category: appType,
                version: appVersion,
                downloadUrl: apk.download_url,
                fileSize: apk.size,
                iconPath: iconUrl
            });

            SYSTEM_CORE.STATE.totalAppsLoaded++;

        } catch (itemError) {
            console.error(`Error processing file ${apk.name}:`, itemError);
        }
    }

    // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
    document.getElementById(SYSTEM_CORE.UI.syncContainerId).style.display = "none";
}

/**
 * Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù‚Ø§Ø¯Ù… Ø³ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø³Ù… (Renderer) 
 * ÙˆÙ…Ø­Ø±Ùƒ Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ø³Ø­Ø±ÙŠ (The Magic Upload Wizard)
 * Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† Ø£ÙƒØ«Ø± Ù…Ù† 500 Ø³Ø·Ø± Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª.
 *//**
 * ==============================================================================
 * ZAITOON LAB - THE SMART UPLOAD WIZARD (ENGINEERED INTERFACE)
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª.
 * ÙŠØ¹ØªÙ…Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ ØªÙ‚Ù†ÙŠØ© "Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„Ø©" Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø­Ø¯ÙˆØ« ØªØ¯Ø§Ø®Ù„ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©.
 */

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ù†Ø´Ø·Ø© (Active Session State)
let activeUploadSession = {
    apkData: null,
    iconData: null,
    metadata: {
        name: "",
        version: "",
        category: ""
    },
    flags: {
        isApkReady: false,
        isIconReady: false,
        hasError: false
    }
};

/**
 * Ø§Ù„ÙˆØ¸ÙŠÙØ©: initiateUploadWizard
 * Ø§Ù„ÙˆØµÙ: Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ø¹Ù…Ù„ÙŠØ© Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯.
 */
async function initiateUploadWizard() {
    try {
        resetUploadSession();
        const apkFile = await triggerFileSelector('apk');
        if (!apkFile) return;
        if (!validateFile(apkFile, 'apk')) return;
        
        activeUploadSession.apkData = apkFile;
        activeUploadSession.flags.isApkReady = true;

        const metadataSuccess = await collectAppMetadata();
        if (!metadataSuccess) return;

        // --- Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø°Ø±ÙŠ Ù‡Ù†Ø§ ---
        // Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªØºÙŠÙŠØ± Ù†Øµ Ø§Ù„Ø²Ø± Ø§Ù„Ø£ØµÙ„ÙŠ Ù„ÙŠØµØ¨Ø­ Ù‡Ùˆ "Ø²Ø± Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©"
        const btn = document.getElementById("mainAddBtn");
        const originalText = btn.innerHTML;
        btn.innerHTML = "ğŸ–¼ï¸ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ø§Ù„Ø¢Ù† Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©";
        btn.style.backgroundColor = "#0366d6";
        
        // Ù†Ù†ØªØ¸Ø± Ù†Ù‚Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        btn.onclick = async () => {
            const iconFile = await triggerFileSelector('icon');
            if (iconFile) {
                if (!validateFile(iconFile, 'icon')) return;
                activeUploadSession.iconData = iconFile;
                activeUploadSession.flags.isIconReady = true;
                
                // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
                btn.onclick = () => initiateUploadWizard(); 
                await executeFinalDeployment();
            }
        };
        // -------------------------

    } catch (wizardError) {
        console.error(wizardError);
    }
}

/**
 * Ù…Ø­Ø±Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª (The File Selector Engine)
 * ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯Ø®Ù„Ø§Øª ÙˆÙ‡Ù…ÙŠØ© ÙˆØ§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.
 */
function triggerFileSelector(type) {
    return new Promise((resolve) => {
        const input = document.createElement('input');
        input.type = 'file';
        
        if (type === 'apk') {
            input.accept = SYSTEM_CORE.LIMITS.ALLOWED_APP_EXTENSIONS.map(ext => `.${ext}`).join(',');
        } else {
            input.accept = SYSTEM_CORE.LIMITS.ALLOWED_ICON_EXTENSIONS.map(ext => `.${ext}`).join(',');
        }

        input.onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                console.log(`[WIZARD]: File selected (${type}): ${file.name}`);
                resolve(file);
            } else {
                resolve(null);
            }
        };

        // Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ
        input.click();
    });
}

/**
 * Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…ØªØ·ÙˆØ± (The Advanced Validation System)
 * ÙŠÙØ­Øµ Ø§Ù„Ø§Ù…ØªØ¯Ø§Ø¯Ø§ØªØŒ Ø§Ù„Ø£Ø­Ø¬Ø§Ù…ØŒ ÙˆØ§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù„ÙƒÙ„ Ù…Ù„Ù.
 */
function validateFile(file, type) {
    const extension = file.name.split('.').pop().toLowerCase();
    
    if (type === 'apk') {
        // ÙØ­Øµ Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
        if (!SYSTEM_CORE.LIMITS.ALLOWED_APP_EXTENSIONS.includes(extension)) {
            alert(`ğŸš« Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù„Ù Ø¨ØµÙŠØºØ© (.${extension}) ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ ÙÙŠ Ø®Ø§Ù†Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª.`);
            return false;
        }
        // ÙØ­Øµ Ø§Ù„Ø­Ø¬Ù…
        if (file.size > SYSTEM_CORE.LIMITS.MAX_APK_SIZE) {
            alert(`ğŸš« Ø­Ø¬Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (${(file.size / 1024 / 1024).toFixed(2)}MB) ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ (25MB).`);
            return false;
        }
    } else if (type === 'icon') {
        // ÙØ­Øµ Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
        if (!SYSTEM_CORE.LIMITS.ALLOWED_ICON_EXTENSIONS.includes(extension)) {
            alert(`ğŸš« Ø§Ù„Ø§Ù…ØªØ¯Ø§Ø¯ (.${extension}) ØºÙŠØ± ØµØ§Ù„Ø­ Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… PNG Ø£Ùˆ JPG.`);
            return false;
        }
        // ÙØ­Øµ Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
        if (file.size > SYSTEM_CORE.LIMITS.MAX_ICON_SIZE) {
            alert(`ğŸš« Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 2 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª.`);
            return false;
        }
    }
    return true;
}

/**
 * Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØµÙÙŠØ© (Metadata Collector)
 * ÙˆØ¸ÙŠÙØ© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø¸ÙŠÙØ© ÙˆØ®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø¶Ø§Ø±Ø©.
 */
async function collectAppMetadata() {
    let rawName = prompt("ğŸ“ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø³Ù…ÙŠ (Ù…Ø«Ø§Ù„: Zaitoon Reader):");
    if (!rawName || rawName.trim().length < 3) {
        alert("âš ï¸ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹ Ø£Ùˆ ØºÙŠØ± ØµØ§Ù„Ø­.");
        return false;
    }

    let rawCategory = prompt("ğŸ“‚ ØªØµÙ†ÙŠÙ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Android, Beta, Professional, Tool):", "Android");
    let rawVersion = prompt("ğŸ”¢ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…Ø«Ø§Ù„: 1.0.0):", "1.0.0");

    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªÙØ³Ø¯ Ù‡ÙŠÙƒÙ„ GitHub API
    const cleanName = rawName.replace(/[\\/:*?"<>|]/g, "").trim();
    
    activeUploadSession.metadata = {
        name: cleanName,
        category: rawCategory || "Generic",
        version: rawVersion || "1.0.0"
    };

    return true;
}

/**
 * Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¬Ù„Ø³Ø© (Session Cleaner)
 */
function resetUploadSession() {
    activeUploadSession = {
        apkData: null,
        iconData: null,
        metadata: { name: "", version: "", category: "" },
        flags: { isApkReady: false, isIconReady: false, hasError: false }
    };
    const btn = document.getElementById("mainAddBtn");
    btn.disabled = false;
    btn.innerHTML = '<span class="plus-icon">+</span> Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹';
}

/**
 * ÙÙŠ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:
 * 7. ØªÙ†ÙÙŠØ° Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Base64 Parallel Processing)
 * 8. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ§Øª (Dynamic Row Rendering)
 * 9. Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (Fuzzy Search Logic)
 * 10. Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Global Error Handler)
 *//**
 * ==============================================================================
 * ZAITOON LAB - PARALLEL PROCESSING & DEPLOYMENT CORE
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ© Ø¥Ù„Ù‰ ØµÙŠØº Ø±Ù‚Ù…ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ù„
 * Ø¹Ø¨Ø± Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ HTTP. ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„ÙˆØ¹ÙˆØ¯ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø±ÙØ¹.
 */

/**
 * Ø§Ù„ÙˆØ¸ÙŠÙØ©: executeFinalDeployment
 * Ø§Ù„ÙˆØµÙ: Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ¯ÙŠØ± Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ÙØ¹ Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹.
 */
async function executeFinalDeployment() {
    console.log("%c[DEPLOYER]: Finalizing assets for cloud transmission...", "color: #28a745; font-weight: bold;");
    
    const btn = document.getElementById("mainAddBtn");
    const statusBox = document.getElementById(SYSTEM_CORE.UI.syncContainerId);
    const statusText = document.getElementById(SYSTEM_CORE.UI.statusTextId);

    try {
        // 1. ØªØ£Ù…ÙŠÙ† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        btn.disabled = true;
        btn.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„ÙØ§Øª...";
        statusBox.style.display = "block";
        statusText.innerText = "ğŸ“¦ Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© (Binary Data)...";

        // 2. ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙØ±ÙŠØ¯Ø© Ù„Ù„Ø¹Ù…Ù„ÙŠØ© (Unique Deployment ID)
        const timestamp = Date.now();
        const deploymentID = `DL-${timestamp}`;

        // 3. Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠ (Parallel Encoding Engine)
        // Ù†Ù‚ÙˆÙ… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù€ APK ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯ Ù„ØªÙˆÙÙŠØ± 50% Ù…Ù† Ø²Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        console.log("[DEPLOYER]: Starting Parallel Base64 Encoding...");
        
        const encodingPromises = [
            fileToEncodedBase64(activeUploadSession.apkData)
        ];

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„Ù…ØµÙÙˆÙØ© ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
        if (activeUploadSession.iconData) {
            encodingPromises.push(fileToEncodedBase64(activeUploadSession.iconData));
        }

        const encodedResults = await Promise.all(encodingPromises);
        const apkBase64 = encodedResults[0];
        const iconBase64 = encodedResults[1] || null;

        // 4. Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (Repository Structure)
        // Ù†Ø³ØªØ®Ø¯Ù… Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„ØªØ³Ù…ÙŠØ© Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø¶Ù…Ø§Ù† Ù‚Ø¯Ø±Ø© Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¬Ù„Ø¨ Ø¹Ù„Ù‰ Ù‚Ø±Ø§Ø¡ØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹
        const apkFileName = `${activeUploadSession.metadata.name}__${activeUploadSession.metadata.category}__${activeUploadSession.metadata.version}__${deploymentID}.apk`;
        const iconExtension = activeUploadSession.iconData ? activeUploadSession.iconData.name.split('.').pop() : 'png';
        const iconFileName = `icon_${deploymentID}.${iconExtension}`;

        // 5. Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ (Sequential Upload Protocol)
        // Ù†Ø±ÙØ¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹
        statusText.innerText = "ğŸš€ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„Ø³Ø­Ø§Ø¨Ø©...";
        
        if (iconBase64) {
            await transmitDataToCloud(
                `${SYSTEM_CORE.CREDENTIALS.STORAGE_PATH}/${iconFileName}`,
                iconBase64,
                `ğŸ–¼ï¸ Upload Icon: ${activeUploadSession.metadata.name}`
            );
        }

        statusText.innerText = `ğŸ“¤ Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (${(activeUploadSession.apkData.size / 1024 / 1024).toFixed(2)} MB)...`;
        
        await transmitDataToCloud(
            `${SYSTEM_CORE.CREDENTIALS.STORAGE_PATH}/${apkFileName}`,
            apkBase64,
            `ğŸ“¦ Deploy App: ${activeUploadSession.metadata.name} v${activeUploadSession.metadata.version}`
        );

        // 6. Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­ (Post-Deployment Success)
        console.log("%c[DEPLOYER]: Deployment Successful! Reloading Workspace...", "color: #28a745;");
        alert(`âœ… ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!\nØªØ·Ø¨ÙŠÙ‚ "${activeUploadSession.metadata.name}" Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù† Ù„Ù„ØªØ­Ù…ÙŠÙ„.`);
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ù…Ø¨Ø§Ø´Ø±Ø©
        location.reload();

    } catch (deployError) {
        console.error("[CRITICAL DEPLOY ERROR]:", deployError);
        handleGlobalError(deployError);
    } finally {
        btn.disabled = false;
        btn.innerHTML = '<span class="plus-icon">+</span> Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹';
    }
}

/**
 * Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Base64 Encoder Engine)
 * Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¶Ø®Ù…Ø© Ø¥Ù„Ù‰ Ø³Ù„Ø§Ø³Ù„ Ù†ØµÙŠØ© Ø¯ÙˆÙ† Ø§Ø³ØªÙ†Ø²Ø§Ù Ø§Ù„Ø°Ø§ÙƒØ±Ø©.
 */
function fileToEncodedBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… ArrayBuffer Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±
        reader.readAsDataURL(file);
        
        reader.onload = () => {
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù€ Base64 ÙÙ‚Ø· ÙˆØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù€ Data Header
            const base64Content = reader.result.split(',')[1];
            resolve(base64Content);
        };

        reader.onprogress = (event) => {
            if (event.lengthComputable) {
                const percent = Math.round((event.loaded / event.total) * 100);
                console.log(`[ENCODER]: Processing ${file.name}: ${percent}%`);
            }
        };

        reader.onerror = (error) => {
            console.error(`[ENCODER ERROR]: Failed to process ${file.name}`, error);
            reject(new Error(`ÙØ´Ù„ ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„Ù: ${file.name}`));
        };
    });
}

/**
 * Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ (Cloud Transmission Protocol)
 * ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ GitHub API Ø¹Ø¨Ø± Ø·Ù„Ø¨Ø§Øª PUT Ø§Ù„Ù…Ø´ÙØ±Ø©.
 */
async function transmitDataToCloud(path, base64Content, commitMessage) {
    const apiEndpoint = `https://api.github.com/repos/${SYSTEM_CORE.CREDENTIALS.OWNER}/${SYSTEM_CORE.CREDENTIALS.REPO}/contents/${path}`;
    
    try {
        const response = await fetch(apiEndpoint, {
            method: "PUT",
            headers: {
                "Authorization": `token ${SYSTEM_CORE.CREDENTIALS.TOKEN}`,
                "Content-Type": "application/json",
                "Accept": "application/vnd.github.v3+json"
            },
            body: JSON.stringify({
                message: commitMessage,
                content: base64Content
            })
        });

        if (!response.ok) {
            const errorPayload = await response.json();
            throw new Error(`API Failure: ${errorPayload.message || response.statusText}`);
        }

        const result = await response.json();
        console.log(`[TRANSMITTER]: Asset pushed successfully. SHA: ${result.content.sha}`);
        return result;

    } catch (xhrError) {
        console.error("[TRANSMITTER ERROR]: Network or API Fault:", xhrError);
        throw xhrError;
    }
}

/**
 * Ù†Ø¸Ø§Ù… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ù…Ù„ (Global Error Management)
 */
function handleGlobalError(error) {
    let userMessage = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø±ÙØ¹ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹.";
    
    if (error.message.includes("401") || error.message.includes("Bad credentials")) {
        userMessage = "ğŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆØ«ÙŠÙ‚: Ù…ÙØªØ§Ø­ Ø§Ù„ÙˆØµÙˆÙ„ (Token) ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡.";
    } else if (error.message.includes("404")) {
        userMessage = "ğŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø±: Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø£Ùˆ Ø§Ù„Ù…Ø¬Ù„Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ GitHub.";
    } else if (error.message.includes("too large")) {
        userMessage = "ğŸš¨ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø³ÙŠØ§Ø³Ø© GitHub API.";
    }

    alert(`âŒ ÙØ´Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…: ${userMessage}\n\nØ§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©: ${error.message}`);
}
/**
 * ==============================================================================
 * ZAITOON LAB - DYNAMIC UI RENDERING ENGINE (VISUAL COMPOSER)
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ù„Ø­Ø¸ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©.
 * ØªÙ… ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø­Ø±Ùƒ Ù„ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¸Ø§Ù… "Ø§Ù„Ø­Ù‚Ù† Ø§Ù„Ø¢Ù…Ù†" (Safe Injection) Ù„Ù…Ù†Ø¹ Ù‡Ø¬Ù…Ø§Øª XSS.
 */

/**
 * Ø§Ù„ÙˆØ¸ÙŠÙØ©: renderDynamicAppRow
 * Ø§Ù„ÙˆØµÙ: ØªØ£Ø®Ø° ÙƒØ§Ø¦Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªÙ‚ÙˆÙ… Ø¨Ø¨Ù†Ø§Ø¡ ØµÙ ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨ØªÙ†Ø³ÙŠÙ‚ Ø§Ø­ØªØ±Ø§ÙÙŠ.
 */
function renderDynamicAppRow(appData) {
    const tableBody = document.getElementById(SYSTEM_CORE.UI.tableBodyId);
    
    // 1. Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø© (Data Sanitization)
    const safeTitle = escapeHTML(appData.title);
    const safeCategory = escapeHTML(appData.category);
    const safeVersion = escapeHTML(appData.version);
    const safeUrl = appData.downloadUrl;
    const safeIcon = appData.iconPath;
    
    // 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù (File Size Formatter)
    // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠØªØ§Øª Ø¥Ù„Ù‰ ÙˆØ­Ø¯Ø§Øª Ù…Ù‚Ø±ÙˆØ¡Ø© (MB, KB)
    const formattedSize = formatBytes(appData.fileSize);

    // 3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„ØµÙ (Row Element Creation)
    const tableRow = document.createElement('tr');
    tableRow.className = 'dynamic-app-row';
    tableRow.setAttribute('data-category', safeCategory.toLowerCase());
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¯Ø®ÙˆÙ„ Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠ Ø¹Ø¨Ø± CSS Animation
    tableRow.style.animation = "rowEntrance 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards";

    // 4. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„Ù„ØµÙ (Internal Row Architecture)
    // Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù€ Template Literals Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø¨ÙˆØ¶ÙˆØ­ Ù…Ø¹ Ø¯Ù…Ø¬ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
    tableRow.innerHTML = `
        <td class="action-cell">
            <a href="${safeUrl}" class="download-link" download target="_blank">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 8px;">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Download
            </a>
        </td>
        
        <td class="type-cell">
            <span class="badge badge-dynamic">${safeCategory}</span>
        </td>
        
        <td class="identity-cell">
            <div class="app-identity">
                <div class="app-icon-wrapper dynamic-shadow">
                    <img src="${safeIcon}" 
                         alt="${safeTitle} Icon" 
                         loading="lazy"
                         onerror="handleImageLoadError(this)">
                </div>
                <div class="app-details">
                    <span class="app-name">${safeTitle}</span>
                    <div class="app-meta-tags">
                        <span class="app-platform">Android / Mobile ğŸ“±</span>
                        <span class="app-version-tag">v${safeVersion}</span>
                    </div>
                </div>
            </div>
        </td>
        
        <td class="size-cell">
            <div class="size-container">
                <span class="size-value">${formattedSize}</span>
                <div class="size-bar-bg">
                    <div class="size-bar-fill" style="width: ${calculateSizePercentage(appData.fileSize)}%"></div>
                </div>
            </div>
        </td>
    `;

    // 5. Ø­Ù‚Ù† Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ (Injection)
    // Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©
    // Ù„Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.
    const firstDynamicRow = tableBody.querySelector('.dynamic-app-row');
    if (firstDynamicRow) {
        tableBody.insertBefore(tableRow, firstDynamicRow);
    } else {
        tableBody.appendChild(tableRow);
    }
    
    console.log(`[RENDERER]: App "${safeTitle}" successfully injected into UI.`);
}

/**
 * Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø­Ø¬Ø§Ù… (Byte Formatter Algorithm)
 * ØªÙ‚ÙˆÙ… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¶Ø®Ù…Ø© Ø¥Ù„Ù‰ ØµÙŠØºØ© Ù…ÙÙ‡ÙˆÙ…Ø© Ù‡Ù†Ø¯Ø³ÙŠØ§Ù‹.
 */
function formatBytes(bytes, decimals = 2) {
    if (bytes === 0) return '0 Bytes';

    const k = 1024;
    const dm = decimals < 0 ? 0 : decimals;
    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];

    const i = Math.floor(Math.log(bytes) / Math.log(k));

    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
}

/**
 * Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ù„Ù„Ø­Ø¬Ù… (Visual Weight Calculator)
 * ØªØ³ØªØ®Ø¯Ù… Ù„Ø±Ø³Ù… Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ØµØºÙŠØ± Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø±Ù‚Ù… Ù„Ø¥Ø¹Ø·Ø§Ø¡ Ù„Ù…Ø³Ø© Ø¬Ù…Ø§Ù„ÙŠØ©.
 */
function calculateSizePercentage(size) {
    const maxSize = SYSTEM_CORE.LIMITS.MAX_APK_SIZE;
    const percentage = (size / maxSize) * 100;
    return Math.min(percentage, 100); // Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 100%
}

/**
 * Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ø§Ù† (XSS Protection)
 * ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø¯Ø®Ù„Ø© Ù…Ù† Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ Ø®Ø¨ÙŠØ«Ø© Ù‚Ø¯ ÙŠØªÙ… Ø­Ù‚Ù†Ù‡Ø§ Ø¹Ø¨Ø± Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª.
 */
function escapeHTML(str) {
    const p = document.createElement('p');
    p.textContent = str;
    return p.innerHTML;
}

/**
 * Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØµÙˆØ± (Image Fallback Handler)
 * ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ©.
 */
function handleImageLoadError(imgElement) {
    console.warn(`[RENDERER]: Icon load failed for ${imgElement.alt}. Using fallback.`);
    imgElement.src = "https://cdn-icons-png.flaticon.com/512/226/226770.png";
    imgElement.style.opacity = "0.7";
}

/**
 * Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ù„Ù„ØµÙÙˆÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Dynamic Runtime Styles)
 */
const dynamicStyles = document.createElement('style');
dynamicStyles.innerHTML = `
    @keyframes rowEntrance {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .badge-dynamic {
        background-color: #f1f8ff;
        color: #0366d6;
        border: 1px solid #c8e1ff;
    }
    
    .app-version-tag {
        font-size: 10px;
        background: #eee;
        padding: 1px 5px;
        border-radius: 4px;
        margin-right: 8px;
        color: #666;
    }
    
    .size-bar-bg {
        width: 100%;
        height: 4px;
        background: #eee;
        border-radius: 2px;
        margin-top: 5px;
        overflow: hidden;
    }
    
    .size-bar-fill {
        height: 100%;
        background: var(--primary-color);
        border-radius: 2px;
        transition: width 1s ease-out;
    }
    
    .dynamic-shadow {
        transition: transform 0.3s ease;
    }
    
    .dynamic-app-row:hover .dynamic-shadow {
        transform: scale(1.1);
    }
`;
document.head.appendChild(dynamicStyles);/**
 * ==============================================================================
 * ZAITOON LAB - INTELLIGENT SEARCH ENGINE & FILTERING SYSTEM
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ ÙˆØªØ±Ø´ÙŠØ­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„.
 * ÙŠØ¹ØªÙ…Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© "Ø§Ù„ØªØ±Ø´ÙŠØ­ Ø§Ù„Ù„Ø­Ø¸ÙŠ" Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.
 */

/**
 * Ø§Ù„ÙˆØ¸ÙŠÙØ©: searchTable
 * Ø§Ù„ÙˆØµÙ: Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡ Ø¹Ù†Ø¯ ÙƒÙ„ Ù†Ù‚Ø±Ø© Ù…ÙØªØ§Ø­ ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø«.
 */
function searchTable() {
    console.log("%c[SEARCH ENGINE]: Analyzing user input...", "color: #0366d6; font-weight: bold;");

    // 1. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØªÙ†Ø¸ÙŠÙÙ‡Ø§ (Input Normalization)
    const input = document.getElementById(SYSTEM_CORE.UI.searchFieldId);
    const filter = input.value.toLowerCase().trim();
    const tableBody = document.getElementById(SYSTEM_CORE.UI.tableBodyId);
    const rows = tableBody.getElementsByTagName("tr");
    
    // Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Results Tracking)
    let visibleRowsCount = 0;
    const totalRows = rows.length;

    // 2. Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„ÙØ­Øµ Ø§Ù„Ø´Ø§Ù…Ù„ (Deep Scan Algorithm)
    // Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ ÙƒØ§ÙØ© Ø§Ù„ØµÙÙˆÙ (Ø§Ù„Ø±Ø³Ù…ÙŠØ© ÙˆØ§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©) ÙˆÙØ­Øµ Ù…Ø­ØªÙˆØ§Ù‡Ø§
    for (let i = 0; i < totalRows; i++) {
        const currentRow = rows[i];
        
        // Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ ØµÙ "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬" Ù…Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ù†ÙØ³Ù‡Ø§
        if (currentRow.id === "emptyState") continue;

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† Ù…Ø®ØªÙ„Ù Ø§Ù„Ø®Ù„Ø§ÙŠØ§ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù†ÙˆØ¹ØŒ Ø§Ù„Ù†Ø¸Ø§Ù…)
        const appNameElement = currentRow.querySelector(".app-name");
        const appCategoryElement = currentRow.querySelector(".badge");
        const appPlatformElement = currentRow.querySelector(".app-platform");

        // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù†Øµ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„ØµÙ Ù„Ø²ÙŠØ§Ø¯Ø© Ø¯Ù‚Ø© Ø§Ù„Ø¨Ø­Ø«
        const rowDataContent = `
            ${appNameElement ? appNameElement.textContent : ''} 
            ${appCategoryElement ? appCategoryElement.textContent : ''} 
            ${appPlatformElement ? appPlatformElement.textContent : ''}
        `.toLowerCase();

        // 3. Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© (Matching Logic)
        if (rowDataContent.includes(filter)) {
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙ Ø¨ØªØ£Ø«ÙŠØ± Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠ
            currentRow.style.display = "";
            currentRow.style.animation = "rowFadeIn 0.3s ease";
            visibleRowsCount++;
        } else {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙ
            currentRow.style.display = "none";
        }
    }

    // 4. Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© "Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†ØªØ§Ø¦Ø¬" (Empty State Management)
    updateEmptyStateVisibility(visibleRowsCount);

    console.log(`[SEARCH ENGINE]: Search complete. Found ${visibleRowsCount} matches.`);
}

/**
 * ÙˆØ¸ÙŠÙØ©: updateEmptyStateVisibility
 * Ø§Ù„ÙˆØµÙ: ØªØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ÙŠØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ù‡ Ø£ÙŠ ØªØ·Ø¨ÙŠÙ‚.
 */
function updateEmptyStateVisibility(count) {
    const emptyStateRow = document.getElementById("emptyState");
    
    if (count === 0) {
        // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¸Ù‡Ø±Ù‡Ø§ ÙˆØ¥Ø¸Ù‡Ø§Ø±Ù‡Ø§
        emptyStateRow.style.display = "table-row";
        emptyStateRow.innerHTML = `
            <td colspan="4" style="text-align:center; padding: 60px 20px;">
                <div style="font-size: 50px; margin-bottom: 15px;">ğŸ”</div>
                <h3 style="color: var(--text-main); margin-bottom: 8px;">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ù†Ø¬Ø¯ Ù…Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡!</h3>
                <p style="color: var(--text-muted); font-size: 14px;">
                    Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ©ØŒ Ù…Ø«Ù„ "Android" Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø³Ø·.
                </p>
                <button onclick="clearSearch()" style="margin-top: 20px; padding: 8px 20px; cursor: pointer; border: 1px solid var(--border-color); border-radius: 4px; background: #fff;">
                    Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«
                </button>
            </td>
        `;
    } else {
        emptyStateRow.style.display = "none";
    }
}

/**
 * ÙˆØ¸ÙŠÙØ©: clearSearch
 * Ø§Ù„ÙˆØµÙ: Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« ÙˆØ¥Ø¸Ù‡Ø§Ø± ÙƒØ§ÙØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ø¬Ø¯Ø¯Ø§Ù‹.
 */
function clearSearch() {
    const input = document.getElementById(SYSTEM_CORE.UI.searchFieldId);
    input.value = "";
    searchTable(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ
    input.focus();
}

/**
 * Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Advanced Filtering Features)
 * ÙŠØ³Ù…Ø­ Ø¨ØªØµÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ (Ù…Ø«Ù„Ø§Ù‹ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù€ APK ÙÙ‚Ø·)
 */
function filterByCategory(category) {
    console.log(`[FILTER]: Filtering by category: ${category}`);
    const rows = document.getElementById(SYSTEM_CORE.UI.tableBodyId).getElementsByTagName("tr");
    
    for (let row of rows) {
        if (row.id === "emptyState") continue;
        
        const rowCategory = row.getAttribute('data-category');
        if (category === 'all' || rowCategory === category.toLowerCase()) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }
    }
}

/**
 * ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ (Performance Optimization)
 * Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù€ Debouncing Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø¥Ø±Ù‡Ø§Ù‚ Ø§Ù„Ù…ØªØµÙØ­ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
 */
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ø°Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù„ÙŠ
const optimizedSearch = debounce(() => searchTable(), 150);
document.getElementById(SYSTEM_CORE.UI.searchFieldId).oninput = optimizedSearch;

/**
 * Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« (Search UI Styles)
 */
const searchStyles = document.createElement('style');
searchStyles.innerHTML = `
    @keyframes rowFadeIn {
        from { opacity: 0; transform: scale(0.98); }
        to { opacity: 1; transform: scale(1); }
    }
    
    .search-highlight {
        background-color: #fff5b1;
        font-weight: bold;
    }
`;
document.head.appendChild(searchStyles);
/**
 * ==============================================================================
 * ZAITOON LAB - SYSTEM MONITOR & FINAL TERMINATION
 * ==============================================================================
 * Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… (1-9) ØªØ¹Ù…Ù„ Ø¨ØªÙˆØ§ÙÙ‚.
 * ÙƒÙ…Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¯ÙˆØ§Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØ¥ØºÙ„Ø§Ù‚ Ø¨Ù†ÙŠØ© Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø¨Ø´ÙƒÙ„ Ø³Ù„ÙŠÙ….
 */

/**
 * ÙˆØ¸ÙŠÙØ©: runSystemDiagnostic
 * Ø§Ù„ÙˆØµÙ: ÙØ­Øµ Ø£Ø®ÙŠØ± Ù„ÙƒØ§ÙØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø­ÙŠÙˆÙŠØ© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„Ù‡.
 */
function runSystemDiagnostic() {
    console.log("%c[DIAGNOSTIC]: Starting Final System Check...", "color: #6a1b9a; font-weight: bold;");
    
    const criticalElements = [
        { name: "Table Body", el: document.getElementById(SYSTEM_CORE.UI.tableBodyId) },
        { name: "Search Field", el: document.getElementById(SYSTEM_CORE.UI.searchFieldId) },
        { name: "Add Button", el: document.getElementById("mainAddBtn") },
        { name: "Sync Container", el: document.getElementById(SYSTEM_CORE.UI.syncContainerId) }
    ];

    let systemHealth = true;

    criticalElements.forEach(item => {
        if (!item.el) {
            console.error(`[DIAGNOSTIC ERROR]: Missing Essential Element: ${item.name}`);
            systemHealth = false;
        }
    });

    if (systemHealth) {
        console.log("%c[SYSTEM STATUS]: ALL SYSTEMS OPERATIONAL (v5.0.0)", "background: #28a745; color: #fff; padding: 2px 5px; border-radius: 3px;");
        printSystemBanner();
    } else {
        console.warn("[SYSTEM STATUS]: System running with degraded features.");
    }
}

/**
 * ÙˆØ¸ÙŠÙØ©: printSystemBanner
 * Ø§Ù„ÙˆØµÙ: Ø·Ø¨Ø§Ø¹Ø© Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Ø§Ù„Ù€ Console Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¥ØµØ¯Ø§Ø±.
 */
function printSystemBanner() {
    const banner = `
    ##########################################
    #          ZAITOON LAB ENGINE v5.0       #
    #      DEPLOYMENT & SYNC ACTIVE          #
    #   GITHUB API PROTOCOL: STABLE          #
    ##########################################
    `;
    console.log(`%c${banner}`, "color: #1e5c20; font-family: monospace; font-weight: bold;");
}

/**
 * Ù…Ø¹Ø§Ù„Ø¬ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Power User Shortcuts)
 * Ù…ÙŠØ²Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù„ÙˆØ¸Ø§Ø¦Ù.
 */
document.addEventListener('keydown', function(event) {
    // Alt + A Ù„ÙØªØ­ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø±ÙØ¹ ÙÙˆØ±Ø§Ù‹
    if (event.altKey && (event.key === 'a' || event.key === 'A')) {
        event.preventDefault();
        initiateUploadWizard();
    }
    
    // Esc Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø« ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    if (event.key === 'Escape') {
        clearSearch();
    }
});

/**
 * ÙˆØ¸ÙŠÙØ©: handleWindowResize
 * Ø§Ù„ÙˆØµÙ: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø«Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹.
 */
window.onresize = debounce(() => {
    console.log("[UI]: Recalculating Layout Dimensions...");
    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
}, 250);

// ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ­Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 1.5 Ø«Ø§Ù†ÙŠØ© Ù…Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ù€ DOM
setTimeout(runSystemDiagnostic, 1500);

</script>

</body>
</html>
